<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script type="text/javascript" src="vendor/jquery.min.js"></script>
<script>
$(document).ready(function () {
	function printDeep(obj, fun) {
		for (var key in obj) {
			if (typeof obj[key] === "object") {
				printDeep(obj[key], fun);
			} else {
				fun(key + ': ' + obj[key]);
			}
		}
	}
	function pullTaskList() {
		$.ajax({
			method: "GET",
			url:"list_tasks",
			contentType: "application/json; charset=utf-8",
			dataType: "json" /* expecting data type */
		}).done(function (res) {
			var tasks = res['tasks'] || [];
			var print = '';
			printDeep(tasks, function (str) {
				print += str + "\n";
				//console.log(str)
			});
			setTimeout(function () {
				$("#tasks").text(print);
			}, 500);
		});
	}

	$("#reload").click(function() { pullTaskList(); });
	pullTaskList();
});
</script>
</head>
<body>

<h3>Task list</h3>
<button id="reload">reload</button>
<pre id="tasks">
</pre>

</body>
</html>
